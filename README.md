# Instagram DM送信管理アプリ

業務委託スタッフがスマホでInstagram DMの送信実績を記録し、月毎にGoogleスプレッドシートへ蓄積するWebアプリです。管理画面はありません。

## 誰でも開けるリンクにする（公開URL）

- このアプリは**認証不要**です。名前を入力するだけで利用できます。
- **Vercel** にデプロイすると、誰でも開ける公開URLが発行されます。
  1. [Vercel](https://vercel.com) でプロジェクトをインポート（Git連携または `vercel` CLI）
  2. 環境変数に `.env` の内容を設定（Vercelの「Settings → Environment Variables」）
  3. デプロイ後、表示される **URL（例: `https://xxx.vercel.app`）をスタッフに共有**すれば、誰でもそのリンクから利用できます。

## スプレッドシートに月毎に蓄積する（無料）

送信されたDM記録を、**無料のGoogle Apps Script** でスプレッドシートに1件ずつ追記します。管理画面は不要で、月（`YYYY-MM`）ごとに同じシートに蓄積されます。

### 1. スプレッドシート側の準備

1. **Googleスプレッドシート**を新規作成
2. メニュー **拡張機能 → Apps Script** を開く
3. 表示された `Code.gs` を削除し、このリポジトリの **`google-apps-script/Code.gs`** の内容をすべて貼り付けて保存
4. **デプロイ → 新しいデプロイ → 種類で「ウェブアプリ」を選択**
   - **説明**: 任意（例: DM記録受信）
   - **実行ユーザー**: 自分
   - **アクセス**: **全員**（リンクを知っている全員がアクセス可能）
5. **デプロイ** をクリックし、表示される **「ウェブアプリのURL」** をコピー

### 2. アプリ側の設定

- ローカルなら `.env` に、Vercelなら **Environment Variables** に次を追加：

```env
VITE_GOOGLE_SCRIPT_URL=ここにコピーしたウェブアプリのURL
```

- シートへの書き込みを制限したい場合（任意）:
  - Apps Script の **プロジェクトの設定 → スクリプトプロパティ** で `SHEET_SECRET` に任意の文字列を設定
  - `.env` に `VITE_SHEET_SECRET=同じ文字列` を設定

これで、DM送信のたびに同じスプレッドシートの「DM記録」シートに1行ずつ追記され、月毎に蓄積されます。Firebase も Google も無料枠で利用できます。

## 開発

```bash
npm install
npm run dev
```

## 環境変数

| 変数名 | 必須 | 説明 |
|--------|------|------|
| `VITE_FIREBASE_*` | ○ | Firebase の設定（6種類） |
| `VITE_GOOGLE_SCRIPT_URL` | - | 上記で発行したウェブアプリのURL。未設定ならスプレッドシート連携は行わない |
| `VITE_SHEET_SECRET` | - | スプレッドシート書き込み制限用（任意） |

`.env.example` をコピーして `.env` を作成し、値を入れてください。
